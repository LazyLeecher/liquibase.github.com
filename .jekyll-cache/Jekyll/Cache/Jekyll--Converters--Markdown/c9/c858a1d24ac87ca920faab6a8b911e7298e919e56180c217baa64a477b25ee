I"Û2<!-- ====================================================== -->
<!-- GENERATED BY ChangeDocGenerator DO NOT MODIFY MANUALLY -->
<!-- ====================================================== -->

<script>
  $(function() {
    $( "#changelog-tabs" ).tabs();
  });
</script>

<h1 id="change-loadupdatedata">Change: â€˜loadUpdateDataâ€™</h1>

<p>Loads or updates data from a CSV file into an existing table. Differs from loadData by issuing a SQL batch that checks for the existence of a record. If found, the record is UPDATEd, else the record is INSERTed. Also, generates DELETE statements for a rollback.</p>

<p>A value of NULL in a cell will be converted to a database NULL rather than the string â€˜NULLâ€™</p>

<h2 id="available-attributes">Available Attributes</h2>

<table>
<tr><th>Name</th><th>Description</th><th>Required&nbsp;For</th><th>Supports</th><th>Since</th></tr>
<tr><td style="vertical-align: top">catalogName</td><td style="vertical-align: top">Name of the catalog</td><td style="vertical-align: top"></td><td style="vertical-align:top">all</td><td style="vertical-align: top">3.0</td></tr>
<tr><td style="vertical-align: top">encoding</td><td style="vertical-align: top">Encoding of the CSV file (defaults to UTF-8)</td><td style="vertical-align: top"></td><td style="vertical-align:top">all</td><td style="vertical-align: top"></td></tr>
<tr><td style="vertical-align: top">file</td><td style="vertical-align: top">CSV file to load</td><td style="vertical-align: top">all</td><td style="vertical-align:top">all</td><td style="vertical-align: top"></td></tr>
<tr><td style="vertical-align: top">primaryKey</td><td style="vertical-align: top">Comma delimited list of the columns for the primary key</td><td style="vertical-align: top">all</td><td style="vertical-align:top">all</td><td style="vertical-align: top"></td></tr>
<tr><td style="vertical-align: top">quotchar</td><td style="vertical-align: top"></td><td style="vertical-align: top"></td><td style="vertical-align:top">all</td><td style="vertical-align: top"></td></tr>
<tr><td style="vertical-align: top">schemaName</td><td style="vertical-align: top">Name of the schema</td><td style="vertical-align: top"></td><td style="vertical-align:top">all</td><td style="vertical-align: top"></td></tr>
<tr><td style="vertical-align: top">separator</td><td style="vertical-align: top"></td><td style="vertical-align: top"></td><td style="vertical-align:top">all</td><td style="vertical-align: top"></td></tr>
<tr><td style="vertical-align: top">tableName</td><td style="vertical-align: top">Name of the table to insert or update data in</td><td style="vertical-align: top">all</td><td style="vertical-align:top">all</td><td style="vertical-align: top"></td></tr>
</table>

<h2 id="nested-properties">Nested Properties</h2>

<table>
<tr><th>Name</th><th>Description</th><th>Required&nbsp;For</th><th>Supports</th><th>Multiple&nbsp;Allowed</th><th>Since</th></tr>
<tr><td style="vertical-align: top">columns</td><td style="vertical-align: top">Defines how the data should be loaded.<br /><br />See the <a href="../column.html">column tag</a> documentation for more information</td><td style="vertical-align: top">all</td><td style="vertical-align: top">all</td><td style="vertical-align: top">yes</td><td style="vertical-align: top"></td></tr>
</table>
<div id="changelog-tabs">
<ul>
    <li><a href="#tab-xml">XML Sample</a></li>
    <li><a href="#tab-yaml">YAML Sample</a></li>
    <li><a href="#tab-json">JSON Sample</a></li>
  </ul>
<div id="tab-xml">

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;changeSet</span> <span class="na">author=</span><span class="s">"liquibase-docs"</span> <span class="na">id=</span><span class="s">"loadUpdateData-example"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;loadUpdateData</span> <span class="na">catalogName=</span><span class="s">"cat"</span>
            <span class="na">encoding=</span><span class="s">"UTF-8"</span>
            <span class="na">file=</span><span class="s">"com/example/users.csv"</span>
            <span class="na">primaryKey=</span><span class="s">"pk_id"</span>
            <span class="na">quotchar=</span><span class="s">"A String"</span>
            <span class="na">schemaName=</span><span class="s">"public"</span>
            <span class="na">separator=</span><span class="s">"A String"</span>
            <span class="na">tableName=</span><span class="s">"person"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"address"</span> <span class="na">type=</span><span class="s">"varchar(255)"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/loadUpdateData&gt;</span>
<span class="nt">&lt;/changeSet&gt;</span></code></pre></figure>

</div>
<div id="tab-yaml">

<figure class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="na">changeSet</span><span class="pi">:</span>
  <span class="na">id</span><span class="pi">:</span> <span class="s">loadUpdateData-example</span>
  <span class="na">author</span><span class="pi">:</span> <span class="s">liquibase-docs</span>
  <span class="na">changes</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">loadUpdateData</span><span class="pi">:</span>
      <span class="na">catalogName</span><span class="pi">:</span> <span class="s">cat</span>
      <span class="na">columns</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">column</span><span class="pi">:</span>
          <span class="na">name</span><span class="pi">:</span> <span class="s">address</span>
          <span class="na">type</span><span class="pi">:</span> <span class="s">varchar(255)</span>
      <span class="na">encoding</span><span class="pi">:</span> <span class="s">UTF-8</span>
      <span class="na">file</span><span class="pi">:</span> <span class="s">com/example/users.csv</span>
      <span class="na">primaryKey</span><span class="pi">:</span> <span class="s">pk_id</span>
      <span class="na">quotchar</span><span class="pi">:</span> <span class="s">A String</span>
      <span class="na">schemaName</span><span class="pi">:</span> <span class="s">public</span>
      <span class="na">separator</span><span class="pi">:</span> <span class="s">A String</span>
      <span class="na">tableName</span><span class="pi">:</span> <span class="s">person</span></code></pre></figure>

</div>
<div id="tab-json">

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"changeSet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"loadUpdateData-example"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"author"</span><span class="p">:</span><span class="w"> </span><span class="s2">"liquibase-docs"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"changes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"loadUpdateData"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"catalogName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cat"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"columns"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="nl">"column"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"address"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"varchar(255)"</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">}]</span><span class="w">
          </span><span class="p">,</span><span class="w">
          </span><span class="nl">"encoding"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UTF-8"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"file"</span><span class="p">:</span><span class="w"> </span><span class="s2">"com/example/users.csv"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"primaryKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pk_id"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"quotchar"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A String"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"schemaName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"public"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"separator"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A String"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"tableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"person"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}]</span><span class="w">
    
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span></code></pre></figure>

</div>
</div>

<h2 id="sql-generated-from-above-sample-mysql">SQL Generated From Above Sample (MySQL)</h2>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">cat</span><span class="p">.</span><span class="n">person</span> <span class="p">(</span><span class="nv">`id,
 name,
 age`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="s1">'1,
 Fred,
 21'</span><span class="p">)</span>
<span class="k">ON</span> <span class="n">DUPLICATE</span> <span class="k">KEY</span> <span class="k">UPDATE</span> <span class="n">id</span><span class="p">,</span>
 <span class="n">name</span><span class="p">,</span>
 <span class="n">age</span> <span class="o">=</span> <span class="s1">'1,
 Fred,
 21'</span>

<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">cat</span><span class="p">.</span><span class="n">person</span> <span class="p">(</span><span class="nv">`id,
 name,
 age`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="s1">'2,
 Wilma,
 22'</span><span class="p">)</span>
<span class="k">ON</span> <span class="n">DUPLICATE</span> <span class="k">KEY</span> <span class="k">UPDATE</span> <span class="n">id</span><span class="p">,</span>
 <span class="n">name</span><span class="p">,</span>
 <span class="n">age</span> <span class="o">=</span> <span class="s1">'2,
 Wilma,
 22'</span>

<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">cat</span><span class="p">.</span><span class="n">person</span> <span class="p">(</span><span class="nv">`id,
 name,
 age`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="s1">'3,
 Barney,
 42'</span><span class="p">)</span>
<span class="k">ON</span> <span class="n">DUPLICATE</span> <span class="k">KEY</span> <span class="k">UPDATE</span> <span class="n">id</span><span class="p">,</span>
 <span class="n">name</span><span class="p">,</span>
 <span class="n">age</span> <span class="o">=</span> <span class="s1">'3,
 Barney,
 42'</span></code></pre></figure>

<h2 id="database-support">Database Support</h2>

<table style="border:1;">
<tr><th>Database</th><th>Notes</th><th>Auto Rollback</th></tr>
<tr><td>DB2</td><td><b>Supported</b></td><td>No</td></tr>
<tr><td>Derby</td><td><b>Supported</b></td><td>No</td></tr>
<tr><td>Firebird</td><td><b>Supported</b></td><td>No</td></tr>
<tr><td>H2</td><td><b>Supported</b></td><td>No</td></tr>
<tr><td>HyperSQL</td><td><b>Supported</b></td><td>No</td></tr>
<tr><td>Informix</td><td><b>Supported</b></td><td>No</td></tr>
<tr><td>MySQL</td><td><b>Supported</b></td><td>No</td></tr>
<tr><td>Oracle</td><td><b>Supported</b></td><td>No</td></tr>
<tr><td>PostgreSQL</td><td><b>Supported</b></td><td>No</td></tr>
<tr><td>SQL Server</td><td><b>Supported</b></td><td>No</td></tr>
<tr><td>SQLite</td><td><b>Supported</b></td><td>No</td></tr>
<tr><td>Sybase</td><td><b>Supported</b></td><td>No</td></tr>
<tr><td>Sybase Anywhere</td><td><b>Supported</b></td><td>No</td></tr>
</table>
:ET