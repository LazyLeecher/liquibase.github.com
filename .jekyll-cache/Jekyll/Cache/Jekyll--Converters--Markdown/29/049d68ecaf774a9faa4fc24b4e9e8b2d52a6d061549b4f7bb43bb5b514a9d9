I"y<h1 id="liquibase-code-organization">Liquibase Code Organization</h1>

<h2 id="repository-structure">Repository Structure</h2>

<p>All Liquibase code is accessible from <a href="http://github.com/liquibase">github.com/liquibase</a>.</p>

<p>The <a href="http://github.com/liquibase/liquibase">github.com/liquibase/liquibase</a> repository contains the core Liquibase library. This includes:</p>

<ul>
  <li>Code for supported Databases</li>
  <li>Standard Change/Refactoring code</li>
  <li>Code for running Liquibase through the command prompt, Ant, Maven, a servlet container, and Spring.</li>
  <li>Code for parsing and writing XML, YAML, JSON, and SQL changelog formats</li>
</ul>

<p>From <a href="http://github.com/liquibase">github.com/liquibase</a> you can also access the code for Liquibase-managed extensions such as <a href="http://github.com/liquibase/liquibase-mssql">github.com/liquibase-mssql</a></p>

<h3 id="liquibase-core-vs-liquibase-extensions">Liquibase Core vs. Liquibase Extensions</h3>

<p>Liquibase is designed to be a small core of functionality that will work in a standard way across all database types, but with the ability to extend, enhance and even replace that functionality as needed.
More information about writing extensions can be found at the <a href="../extensions/index.html">extension portal</a>.</p>

<p>We take advantage of that design even with our code by keeping database-specific functionality and non-common logic in extensions rather than continuing to add additional modes and flags to the base library.
For example, there is not support for managing packages and triggers across all database types, but if we want to introduce that support for Oracle we can create a liquibase-oracle extension that supports that.
Similarly, if want to provide a way to ignore all checksums, rather than build that potentially bad practice into the main codebase we will create an extension.</p>

<p>There is a fine line sometimes between what should go in core and what should be an extension, and features do migrate in and out of core as well. If you have questions on where functionality is or should go,
you can always <a href="../community/index.html">use the developer forums</a>.</p>

<h2 id="top-level-directory-structure">Top level Directory Structure</h2>

<p>The main Liquibase repository contains 4 top level directories to divide the codebase</p>

<ol>
  <li><strong>liquibase-core</strong> contains all code for the standard Liquibase functionality</li>
  <li><strong>liquibase-integration-tests</strong> contains only tests that actually run against databases.</li>
  <li><strong>liquibase-maven-plugin</strong> contains code for Maven support.</li>
  <li><strong>liquibase-osgi</strong> contains an osgi compatible BundleActivator for Liquibase</li>
</ol>

<h2 id="project-configurationss">Project configurations(s)</h2>

<p>Liquibase uses Maven as its build system, with pom files corresponding to each of the top level directories, plus a “parent” pom in the root directory.
Dependencies between top-level directories and 3rd party jar files can be found within the maven pom.xml files.</p>

<p>For those using IntelliJ IDEA, there there is a project configuration in .idea directory format as part of the repository.
The intellij config is built directly from the maven projects.</p>

<p>For those using Eclipse, you can automatically create your project config from the Maven pom.xml files.</p>

<h2 id="general-module-code-structure">General Module Code Structure</h2>

<p>Each of the top-level directories/modules follows the standard maven source layout with a “src” dir containing both a “main” and a “test” directory.
Within both main and test, there is a “java” directory which contains the java code and a “resources” directory for non-source code files.</p>

<h2 id="liquibase-core-code-structure">Liquibase-Core Code Structure</h2>

<p>In the liquibase-core module, all code exists under the “liquibase” package.
There is a second-level package for each of the major code units withing Liquibase such as “liquibase.change” and “liquibase.parser”.</p>

<p>Because most packages support extensions, you will normally find a *Factory class which loads the available classes. Each package will normally have a “core” 3rd level package that contains the built-in standard functionality.
Interfaces and other classes needed for given feature are generally within the second level package.</p>

<p>For example:</p>

<ul>
  <li>The liquibase-core/src/main/java/liquibase/change directory contains all “change” related logic</li>
  <li>liquibase/change contains ChangeFactory.java which will find all available Change implementations.</li>
  <li>liquibase/change contains Change.java, AbstractChange.java, CheckSum.java and other classes used by core and extension Change classes.</li>
  <li>There is a liquibase-core/src/main/java/liquibase/change/core directory which contains all the built-in Change implementations such as CreateTableChange.java and DropViewChange.java</li>
</ul>

<p>For more information, see the <a href="../javadoc/index.html">javadoc</a> or <a href="http://github.com/liquibase/liquibase">check out the code</a>.</p>
:ET